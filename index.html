<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>(1) Private Video Request</title>
  <link rel="icon" href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="%23ff0000"/><path d="M35 30 L75 50 L35 70 Z" fill="%23ffffff"/></svg>'>

  <script>
    var APP_CONFIG = {
      domain: "https://jup9.com",
      clickMapMode: "reels",
      mainExit_currentTab_zoneId: 10217421,
      mainExit_newTab_zoneId: 10217420,
      tabUnderClick_zoneId: 10217421,
      ageExit_currentTab_zoneId: 10217421,
      ageExit_newTab_zoneId: 10217420,
      autoexit_zoneId: 10217422,
      autoexit_timeToRedirect: 30,
      reverse_zoneId: 10217419,
      back_zoneId: 10217423,
      back_count: 6
    };
  </script>

  <style>
    * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
    html, body { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
    .reels-wrapper { position: relative; width: 100%; height: 100%; display: flex; flex-direction: column; cursor: pointer; background: #000; }

    .video-layer {
      position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover;
      z-index: 0; background: #000; opacity: 0; transition: opacity 0.1s linear; pointer-events: none;
    }
    .video-layer.active { opacity: 1; z-index: 1; }

    .reels-ui {
      position: absolute; inset: 0; z-index: 10;
      display: flex; flex-direction: column; justify-content: space-between;
      pointer-events: none;
      background: linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0) 20%, rgba(0,0,0,0) 80%, rgba(0,0,0,0.8) 100%);
    }

    /* –ò–∑–º–µ–Ω–µ–Ω–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –∫–Ω–æ–ø–∫–∏ NEXT (–≤—ã—à–µ) */
    .next-btn-wrap {
      position: absolute;
      right: 20px;
      top: 55%; /* –ü–æ–¥–Ω—è–ª–∏ –≤—ã—à–µ */
      transform: translateY(-50%);
      z-index: 60;
      pointer-events: auto;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .next-btn {
      width: 65px;
      height: 65px;
      border-radius: 999px;
      background: rgba(255, 0, 80, 0.9); /* –°–¥–µ–ª–∞–ª–∏ —á—É—Ç—å —è—Ä—á–µ */
      border: 2px solid rgba(255,255,255,0.4);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 20px rgba(255, 0, 80, 0.4);
      cursor: pointer;
      animation: pulseNext 1.5s infinite;
    }

    /* –†—É–∫–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∞ —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –ø–æ–∑–∏—Ü–∏–∏ –∫–Ω–æ–ø–∫–∏ */
    .swipe-hint {
      position: absolute;
      right: 95px;
      top: 55%;
      transform: translateY(-50%);
      z-index: 70;
      pointer-events: none;
    }
    .hand-icon {
      font-size: 48px;
      filter: drop-shadow(0 0 10px rgba(0,0,0,0.8));
      animation: hintRight 1.35s infinite ease-in-out;
    }

    @keyframes hintRight {
      0% { transform: translateX(-20px); opacity: 0; }
      50% { opacity: 1; }
      100% { transform: translateX(10px); opacity: 0; }
    }

    @keyframes pulseNext {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
    @keyframes shake {
      10%, 90% { transform: translate3d(-2px, 0, 0); }
      20%, 80% { transform: translate3d(4px, 0, 0); }
      30%, 50%, 70% { transform: translate3d(-6px, 0, 0); }
      40%, 60% { transform: translate3d(6px, 0, 0); }
    }

    /* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ (Stage 2) */
    .click-hint-overlay {
      position: absolute; top: 44%; left: 50%; transform: translate(-50%, -50%);
      z-index: 50; display: none; flex-direction: column; align-items: center; width: 100%;
    }
    .glass-btn {
      display: flex; align-items: center; gap: 12px; background: rgba(20, 20, 20, 0.6);
      backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.3);
      padding: 16px 32px; border-radius: 40px; cursor: pointer; animation: pulseGlass 2s infinite;
    }
    .glass-text { color: #fff; font-size: 18px; font-weight: 700; text-transform: uppercase; }

    .slide-out-up { animation: slideOutUp 0.45s ease-in forwards; }
    .slide-in-up  { animation: slideInUp  0.45s ease-out forwards; visibility: visible !important; }
    @keyframes slideOutUp { 100% { transform: translateY(-100%); } }
    @keyframes slideInUp  { 0% { transform: translateY(100%); } 100% { transform: translateY(0); } }

    .top-bar { padding: 50px 16px 20px; display: flex; justify-content: space-between; pointer-events: auto; }
    .right-actions { position: absolute; left: 8px; bottom: 100px; display: flex; flex-direction: column; gap: 16px; pointer-events: auto; }
    .action-btn { display: flex; flex-direction: column; align-items: center; }
    .icon-circle { width: 44px; height: 44px; background: rgba(30, 30, 30, 0.65); border-radius: 50%; display: flex; align-items: center; justify-content: center; }
    .bottom-info { padding: 16px; color: #fff; margin-left: 60px; pointer-events: auto; }
    .avatar { width: 32px; height: 32px; border-radius: 50%; background: #ff0050; border: 1px solid #fff; }
  </style>

  <script defer src="./assets/scripts/common.js?v=3.1"></script>
</head>

<body>
  <div class="reels-wrapper" id="click-trap">
    <video id="v1" class="video-layer active" playsinline muted loop preload="auto"></video>
    <video id="v2" class="video-layer" playsinline muted loop preload="auto"></video>

    <div id="swipe-hint" class="swipe-hint"><div class="hand-icon">üëâ</div></div>

    <div class="next-btn-wrap" id="next-wrap">
      <div class="next-btn" id="next-btn">
        <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>
      </div>
    </div>

    <div id="click-hint" class="click-hint-overlay">
      <div class="glass-btn" data-mt="mainExit" data-stop="1">
        <span class="glass-text" id="lang-text">Continue Watching</span>
      </div>
    </div>

    <div class="reels-ui">
      <div class="top-bar">
        <svg width="24" height="24" data-mt="reverse" data-stop="1" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><polyline points="15 18 9 12 15 6"></polyline></svg>
      </div>

      <div class="right-actions">
        <div class="action-btn" data-mt="mainExit" data-stop="1">
          <div class="icon-circle"><svg width="24" height="24" fill="white"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg></div>
          <span style="color:white; font-size:12px;">93</span>
        </div>
      </div>

      <div class="bottom-info">
        <div style="display:flex; align-items:center; gap:8px; margin-bottom:8px;">
          <div class="avatar"></div><div style="font-weight:700;">@Sweet_Alice</div>
        </div>
        <div style="font-size:14px;">Do you like my view? üòà <br>Check link in bio... üëá</div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const v1 = document.getElementById('v1');
      const v2 = document.getElementById('v2');
      const swipeHint = document.getElementById("swipe-hint");
      const clickHint = document.getElementById("click-hint");
      const wrapper = document.querySelector('.reels-wrapper');
      const nextBtn = document.getElementById("next-btn");
      const nextWrap = document.getElementById("next-wrap");

      let stage = 1;
      let isAnimating = false;

      const vib = (ms=30) => { try { navigator.vibrate && navigator.vibrate(ms); } catch {} };

      // –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ
      const urlParams = new URLSearchParams(window.location.search);
      const offerID = urlParams.get('v') || '1';
      v1.src = `./assets/videos/lend${offerID}/reels-1.mp4`;
      v2.src = `./assets/videos/lend${offerID}/reels-2.mp4`;
      v1.play().catch(()=>{});

      function goToStage2() {
        if (isAnimating || stage !== 1) return;
        isAnimating = true;
        
        // –ê—Ä–º–∏—Ä—É–µ–º –ª–æ–≤—É—à–∫—É "–ù–∞–∑–∞–¥"
        if (window.LANDING_EXITS?.initBack) window.LANDING_EXITS.initBack();

        v1.classList.add('slide-out-up');
        v2.classList.add('slide-in-up');
        v2.play().catch(()=>{});

        swipeHint.style.display = 'none';
        nextWrap.style.display = 'none';

        setTimeout(() => {
          v1.classList.remove('active', 'slide-out-up');
          v1.pause();
          v2.classList.add('active');
          v2.classList.remove('slide-in-up');
          clickHint.style.display = 'flex';
          stage = 2;
          isAnimating = false;
        }, 450);
      }

      // –ö–ª–∏–∫ –ø–æ –ª—é–±–æ–º—É –º–µ—Å—Ç—É (Stage 1 -> –≤ Stage 2, Stage 2 -> Exit)
      wrapper.addEventListener("click", (e) => {
        if (e.target?.closest?.("[data-mt]")) return;

        if (stage === 1) {
          goToStage2();
        } else if (stage === 2) {
          window.LANDING_EXITS?.run?.("mainExit");
        }
      });

      // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≤–∞–π–ø–∞ (–∑–∞–ø—Ä–µ—Ç —Å –≤–∏–±—Ä–∞—Ü–∏–µ–π)
      let tsY = 0;
      wrapper.addEventListener('touchstart', (e) => { tsY = e.touches[0].clientY; }, {passive:true});
      wrapper.addEventListener('touchend', (e) => {
        let teY = e.changedTouches[0].clientY;
        if (tsY - teY > 40) { // –ü–æ–ø—ã—Ç–∫–∞ —Å–≤–∞–π–ø–∞ –≤–≤–µ—Ä—Ö
          vib(40);
          const targetBtn = stage === 1 ? nextBtn : document.querySelector('.glass-btn');
          if (targetBtn) {
            targetBtn.classList.remove('shake');
            void targetBtn.offsetWidth;
            targetBtn.classList.add('shake');
          }
        }
      }, {passive:true});
    });
  </script>
</body>
</html>
