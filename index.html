<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Video Stream</title>
    
    <script>
    var APP_CONFIG = {
        domain: "https://jup9.com",
        mainExit_currentTab_zoneId: 10217421,
        mainExit_newTab_zoneId: 10217420,
        autoexit_zoneId: 10217422,
        autoexit_timeToRedirect: 30, 
        reverse_zoneId: 10217419,
        back_zoneId: 10217423,
        back_count: 8
    };
    </script>

    <style>
        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        html, body { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        
        .reels-wrapper { position: relative; width: 100%; height: 100%; display: flex; flex-direction: column; cursor: pointer; background: #000; }
        
        /* –í–∏–¥–µ–æ */
        .xh-video { 
            position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; background: #000; 
            transition: opacity 0.3s ease;
            opacity: 1;
        }
        /* –°–∫—Ä—ã–≤–∞–µ–º –≤–∏–¥–µ–æ, –ø–æ–∫–∞ –æ–Ω–æ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —á–µ—Ä–Ω—ã—Ö –º–∏–≥–∞–Ω–∏–π */
        .xh-video.loading { opacity: 0; }

        /* –õ–æ–∞–¥–µ—Ä (–ö—Ä—É—Ç–∏–ª–∫–∞) */
        .loader-container {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            z-index: 5; display: none; pointer-events: none;
        }
        .spinner {
            width: 40px; height: 40px;
            border: 4px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* –û–≤–µ—Ä–ª–µ–π UI */
        .reels-ui { 
            position: absolute; inset: 0; z-index: 10; 
            display: flex; flex-direction: column; justify-content: space-between; 
            pointer-events: none; 
            background: linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0) 20%, rgba(0,0,0,0) 80%, rgba(0,0,0,0.8) 100%);
        }

        /* --- –°–¢–ï–ö–õ–Ø–ù–ù–ê–Ø –ö–ù–û–ü–ö–ê (–ú–£–õ–¨–¢–ò–Ø–ó–´–ß–ù–ê–Ø) --- */
        .click-hint-overlay {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            z-index: 50; display: none; /* –°–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            flex-direction: column; align-items: center; justify-content: center; gap: 15px;
            pointer-events: none;
            width: 100%;
        }

        .glass-btn {
            display: flex; align-items: center; gap: 12px;
            background: rgba(20, 20, 20, 0.45);
            backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            padding: 14px 28px;
            border-radius: 40px;
            cursor: pointer;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
            animation: pulseGlass 2s infinite;
            pointer-events: auto;
            transition: transform 0.1s;
            max-width: 90%;
        }
        .glass-btn:active { transform: scale(0.95); }

        .glass-icon { width: 24px; height: 24px; fill: white; flex-shrink: 0; }
        
        .glass-text {
            color: #fff; font-size: 16px; font-weight: 600; letter-spacing: 0.5px;
            text-transform: uppercase; text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        }

        @keyframes pulseGlass {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.2); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 12px rgba(255, 255, 255, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
        }

        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake {
            10%, 90% { transform: translate(-50%, -50%) translate3d(-2px, 0, 0); }
            20%, 80% { transform: translate(-50%, -50%) translate3d(4px, 0, 0); }
            30%, 50%, 70% { transform: translate(-50%, -50%) translate3d(-8px, 0, 0); }
            40%, 60% { transform: translate(-50%, -50%) translate3d(8px, 0, 0); }
        }

        /* --- UI –≠–õ–ï–ú–ï–ù–¢–´ --- */
        .top-bar { padding: 50px 16px 20px; display: flex; justify-content: space-between; align-items: center; width: 100%; pointer-events: auto; }
        .back-icon { width: 24px; height: 24px; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); opacity: 0.9; }
        .filter-pill { background: rgba(50, 50, 50, 0.6); backdrop-filter: blur(4px); border-radius: 20px; padding: 6px 12px; display: flex; align-items: center; gap: 6px; color: #fff; font-size: 13px; font-weight: 500; }
        .filter-icon { width: 14px; height: 14px; }

        .right-actions { position: absolute; right: 8px; bottom: 100px; display: flex; flex-direction: column; align-items: center; gap: 16px; pointer-events: auto; }
        .action-btn { display: flex; flex-direction: column; align-items: center; gap: 4px; }
        .icon-circle { width: 44px; height: 44px; background: rgba(30, 30, 30, 0.65); border-radius: 50%; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(2px); margin-bottom: 2px; }
        .action-icon { width: 24px; height: 24px; }
        .action-text { font-size: 12px; font-weight: 600; color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.5); }
        .dots-menu { display: flex; gap: 4px; margin-top: 10px; opacity: 0.8; }
        .dot { width: 4px; height: 4px; background: #fff; border-radius: 50%; }

        .bottom-info { padding: 16px; color: #fff; margin-right: 60px; pointer-events: auto; }
        .user-row { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
        .avatar { width: 32px; height: 32px; border-radius: 50%; background: #ff0050; border: 1px solid rgba(255,255,255,0.5); }
        .username { font-weight: 700; font-size: 15px; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }
        .desc { font-size: 14px; line-height: 1.3; opacity: 0.95; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }

        .swipe-hint { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 20; pointer-events: none; display: flex; flex-direction: column; align-items: center; }
        .hand-icon { font-size: 50px; filter: drop-shadow(0 0 10px rgba(0,0,0,0.8)); animation: swipeUp 1.8s infinite ease-in-out; }
        @keyframes swipeUp { 0% { transform: translateY(40px); opacity: 0; } 40% { opacity: 1; } 80% { opacity: 0; } 100% { transform: translateY(-60px); opacity: 0; } }

        .slide-out-up { animation: slideOutUp 0.4s ease-out forwards; }
        .slide-in-up { animation: slideInUp 0.4s ease-out forwards; }
        @keyframes slideOutUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-100%); opacity: 0; } }
        @keyframes slideInUp { 0% { transform: translateY(100%); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } }
    </style>
</head>

<body>

<div class="reels-wrapper" id="click-trap">
    <video class="xh-video" id="main-video" playsinline webkit-playsinline muted preload="auto" loop>
        <source src="" type="video/mp4">
    </video>

    <div id="loader" class="loader-container"><div class="spinner"></div></div>

    <div id="swipe-hint" class="swipe-hint"><div class="hand-icon">üëÜ</div></div>

    <div id="click-hint" class="click-hint-overlay">
        <div class="glass-btn">
            <svg class="glass-icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg>
            <span class="glass-text" id="lang-text">Continue Watching</span>
        </div>
    </div>

    <div class="reels-ui">
        <div class="top-bar">
            <svg class="back-icon" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
            <div class="filter-pill"><svg class="filter-icon" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg><span>Filters</span></div>
        </div>
        <div class="right-actions">
            <div class="action-btn"><div class="icon-circle"><svg class="action-icon" viewBox="0 0 24 24" fill="white" stroke="none"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg></div><span class="action-text">93</span></div>
            
            <div class="action-btn"><div class="icon-circle"><svg class="action-icon" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linejoin="round"><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"></path></svg></div><span class="action-text">Share</span></div>
            
            <div class="action-btn">
                <div class="icon-circle">
                    <svg class="action-icon" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14.5 4l-9.5 9.5a2.5 2.5 0 0 0 3.5 3.5l9.5-9.5"/>
                        <path d="M18 7L21 4" stroke-width="2.5"/><path d="M14 10L12 7" stroke-width="2"/><path d="M20 10L22 13" stroke-width="2"/>
                        <path d="M19.5 2.5l1 1-1 1-1-1 1-1z" fill="white" stroke="none"/>
                    </svg>
                </div>
            </div>

            <div class="dots-menu"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
        </div>
        <div class="bottom-info">
            <div class="user-row"><div class="avatar"></div><div class="username">@Sweet_Alice</div></div>
            <div class="desc">Do you like my view? üòà <br>Check link in bio... üëá</div>
        </div>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const video = document.getElementById("main-video");
    const swipeHint = document.getElementById("swipe-hint");
    const clickHint = document.getElementById("click-hint");
    const langText = document.getElementById("lang-text");
    const loader = document.getElementById("loader");
    const wrapper = document.querySelector('.reels-wrapper');

    // --- 1. –í–°–ï –Ø–ó–´–ö–ò ---
    const translations = {
        'en': "Continue Watching",
        'ru': "–°–º–æ—Ç—Ä–µ—Ç—å –¥–∞–ª—å—à–µ",
        'es': "Continuar viendo",
        'de': "Weiter ansehen",
        'fr': "Continuer √† regarder",
        'pt': "Continuar assistindo",
        'it': "Continua a guardare",
        'tr': "ƒ∞zlemeye devam et",
        'ar': "ŸÖÿ™ÿßÿ®ÿπÿ© ÿßŸÑŸÖÿ¥ÿßŸáÿØÿ©",      
        'zh': "ÁªßÁª≠ËßÇÁúã",            
        'ja': "Ë¶ñËÅ¥„ÇíÁ∂ö„Åë„Çã",          
        'ko': "Í≥ÑÏÜç ÏãúÏ≤≠ÌïòÍ∏∞",          
        'hi': "‡§¶‡•á‡§ñ‡§®‡§æ ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç",       
        'id': "Lanjutkan Menonton",  
        'vi': "Ti·∫øp t·ª•c xem",        
        'th': "‡∏î‡∏π‡∏ï‡πà‡∏≠"                
    };

    // –ê–≤—Ç–æ-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
    const userLang = (navigator.language || navigator.userLanguage || 'en').slice(0, 2).toLowerCase();
    langText.innerText = translations[userLang] || translations['en'];
    
    // –ê—Ä–∞–±—Å–∫–∏–π RTL —Ñ–∏–∫—Å
    if (userLang === 'ar') {
        document.querySelector('.glass-btn').style.direction = 'rtl';
    }

    // --- 2. –ù–ê–°–¢–†–û–ô–ö–ò ---
    const urlParams = new URLSearchParams(window.location.search);
    const offerID = urlParams.get('v') || '1';
    let currentReelIndex = 1;
    
    // Anti-Cache timestamp, —á—Ç–æ–±—ã —Ç–µ–ª–µ–≥—Ä–∞–º –Ω–µ –∫–µ—à–∏—Ä–æ–≤–∞–ª –±–∏—Ç–æ–µ –≤–∏–¥–µ–æ
    const getPath = (index) => `./assets/videos/lend${offerID}/reels-${index}.mp4?t=${Date.now()}`;

    video.src = getPath(currentReelIndex);
    
    video.onerror = function() {
        if (currentReelIndex > 1) {
            console.log("Video not found, looping");
            currentReelIndex = 1; 
            video.src = getPath(currentReelIndex); 
            video.load(); 
            video.play().catch(()=>{});
        }
    };
    video.play().catch(() => {});

    let stage = 1; 
    let touchStartY = 0;
    let touchEndY = 0;
    let isAnimating = false;

    // --- 3. –°–ú–ï–ù–ê –í–ò–î–ï–û (WEBVIEW FIX) ---
    function triggerVisualSwipe() {
        if (isAnimating) return;
        isAnimating = true;

        swipeHint.style.display = 'none';
        
        // 1. –ê–Ω–∏–º–∞—Ü–∏—è —É—Ö–æ–¥–∞
        video.classList.add('slide-out-up');

        setTimeout(() => {
            currentReelIndex++; 
            const nextSource = getPath(currentReelIndex);
            
            // 2. –°–∫—Ä—ã–≤–∞–µ–º –≤–∏–¥–µ–æ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –õ–û–ê–î–ï–†
            video.classList.add('loading');
            loader.style.display = 'block'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫—Ä—É—Ç–∏–ª–∫—É
            
            video.src = nextSource;
            video.load(); 

            // –§—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ (–∫–æ–≥–¥–∞ –≤–∏–¥–µ–æ –≥–æ—Ç–æ–≤–æ)
            const playVideo = () => {
                video.play().then(() => {
                    // –£—Å–ø–µ—Ö
                    loader.style.display = 'none';
                    video.classList.remove('loading');
                    
                    video.classList.remove('slide-out-up');
                    video.classList.add('slide-in-up');

                    setTimeout(() => {
                        showButton();
                        video.classList.remove('slide-in-up');
                        isAnimating = false;
                        stage = 2; 
                    }, 400);

                }).catch((e) => {
                    console.error("Play blocked:", e);
                    // –ï—Å–ª–∏ –±–ª–æ–∫ - –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∏ —É–±–∏—Ä–∞–µ–º –ª–æ–∞–¥–µ—Ä
                    loader.style.display = 'none';
                    showButton();
                });
            };

            // –ñ–¥–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
            video.oncanplay = function() {
                playVideo();
                video.oncanplay = null;
            };

            // –¢–ê–ô–ú–ê–£–¢ –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò (2.5 —Å–µ–∫)
            // –ï—Å–ª–∏ –≤–∏–¥–µ–æ —Ç—è–∂–µ–ª–æ–µ –∏ –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è –≤ –¢–ì - –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∂–µ–º –∫–Ω–æ–ø–∫—É, 
            // —á—Ç–æ–±—ã —é–∑–µ—Ä –º–æ–≥ –∫–ª–∏–∫–Ω—É—Ç—å –∏ —É–π—Ç–∏ –Ω–∞ –æ—Ñ—Ñ–µ—Ä, –∞ –Ω–µ –ø—è–ª–∏—Ç—å—Å—è –≤ —á–µ—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω.
            setTimeout(() => {
                if (stage === 1) {
                    console.log("Timeout reached. Force show button.");
                    loader.style.display = 'none';
                    showButton();
                    stage = 2;
                }
            }, 2500);

        }, 350);
    }

    function showButton() {
        clickHint.style.display = 'flex';
    }

    // --- –°–í–ê–ô–ü–´ ---
    wrapper.addEventListener('touchstart', function(e) {
        touchStartY = e.changedTouches[0].screenY;
    }, {passive: true});

    wrapper.addEventListener('touchend', function(e) {
        touchEndY = e.changedTouches[0].screenY;
        if (touchStartY - touchEndY > 50) { 
            if (stage === 1) {
                const fakeClick = new MouseEvent('click', { view: window, bubbles: true, cancelable: true });
                wrapper.dispatchEvent(fakeClick); 
                triggerVisualSwipe();
            } else {
                const btn = document.querySelector('.glass-btn');
                if(btn) {
                    clickHint.classList.remove('shake');
                    void clickHint.offsetWidth; 
                    clickHint.classList.add('shake');
                }
            }
        }
    }, {passive: true});

    // --- –ö–õ–ò–ö–ò ---
    wrapper.addEventListener("click", function(e) {
        if (!e.isTrusted && stage === 1) { e.stopPropagation(); return; }

        if (stage === 1) {
            e.stopPropagation(); e.stopImmediatePropagation();
            triggerVisualSwipe();
        } else {
            console.log("Click -> Exit");
        }
    }); 
});
</script>

<script>
(()=>{var e,t,n,a,r=Object.create,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,s=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,u=(t,n,a,r)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let e of l(n))c.call(t,e)||e===a||o(t,e,{get:()=>n[e],enumerable:!(r=i(n,e))||r.enumerable});return t},d=(e,t,n)=>(n=null!=e?r(s(e)):{},u(!t&&e&&e.__esModule?n:o(n,"default",{value:e,enumerable:!0}),e)),m=(e={"src/landings/player/locale/en.json"(e,t){t.exports={no:"No",yes:"Yes",install_app_and_continue_watching:"Install our app and continue watching content in Safe mode",notification:"(1) Notification"}}},function(){return t||(0,e[l(e)[0]])((t={exports:{}}).exports,t),t.exports}),w=async()=>{var e=navigator;if(!e.userAgentData)return"";try{var t=["platformVersion"];return(await e.userAgentData.getHighEntropyValues(t)).platformVersion}catch(e){return console.error("Error retrieving data from navigator.userAgentData",e),""}},h=()=>{if("undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat){var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e)return e}return""},v=()=>(new Date).getTimezoneOffset(),p=t=>{let n=new URLSearchParams;return Object.keys(t).forEach(e=>{t[e]&&n.set(e,t[e])}),n},b=new URL(window.location.href),g={pz:null!=(a=b.searchParams.get("pz"))?a:"",tb:null!=(a=b.searchParams.get("tb"))?a:"",tb_reverse:null!=(a=b.searchParams.get("tb_reverse"))?a:"",ae:null!=(a=b.searchParams.get("ae"))?a:"",z:null!=(a=b.searchParams.get("z"))?a:"",var:null!=(a=b.searchParams.get("var"))?a:"",var_1:null!=(a=b.searchParams.get("var_1"))?a:"",var_2:null!=(a=b.searchParams.get("var_2"))?a:"",var_3:null!=(a=b.searchParams.get("var_3"))?a:"",b:null!=(a=b.searchParams.get("b"))?a:"",campaignid:null!=(a=b.searchParams.get("campaignid"))?a:"",abtest:null!=(a=b.searchParams.get("abtest"))?a:"",rhd:null!=(a=b.searchParams.get("rhd"))?a:"1",s:null!=(a=b.searchParams.get("s"))?a:"",ymid:null!=(a=b.searchParams.get("ymid"))?a:"",wua:null!=(a=b.searchParams.get("wua"))?a:"",use_full_list_or_browsers:null!=(a=b.searchParams.get("use_full_list_or_browsers"))?a:"",cid:null!=(a=b.searchParams.get("cid"))?a:"",geo:null!=(a=b.searchParams.get("geo"))?a:""},f=({passParamToParams:e,searchParams:r,windowUrl:o})=>(e.forEach(e=>{var{from:e,to:t,joinWith:n}=e;let a=Array.isArray(e)?e.map(e=>null!=(e=o.searchParams.get(e))?e:"").filter(Boolean).join(null!=n?n:""):null!=(n=o.searchParams.get(e))?n:"";a&&t.forEach(e=>{r.set(e,a)})}),r),y=async({zone:e,passParamToParams:t})=>{var n=h(),a=v(),r=(null==(r=document.querySelector("html"))?void 0:r.getAttribute("data-version"))||"",o=(null==(o=document.querySelector("html"))?void 0:o.getAttribute("data-landing-name"))||"",i=null!=(i=window.templateHash)?i:"",r=JSON.stringify({dataVer:r,landingName:o,templateHash:i}),o=btoa(r),i={pz:g.pz,tb:g.tb,tb_reverse:g.tb_reverse,ae:g.ae,ab2r:g.abtest||String(APP_CONFIG.abtest||"")};let l={ymid:null!=(r=g.var_1)?r:g.var,var:null!=(r=g.var_2)?r:g.z,var_3:g.var_3,b:g.b,campaignid:g.campaignid,click_id:g.s,rhd:g.rhd,os_version:await w(),btz:n.toString(),bto:a.toString(),cmeta:o};e&&(l.zoneid=e),Object.entries(i).forEach(([e,t])=>{t&&(l[e]=t)});r=p(l);return t?f({passParamToParams:t,searchParams:r,windowUrl:new URL(window.location.href)}):r},P=(t,n)=>{try{for(let e=0;e<n;e+=1)window.history.pushState(null,"Please wait...",t);var e=window.location.href;window.history.pushState(null,document.title,e),console.log(`Back initializated ${n} times with `+t)}catch(e){console.error("Failed to push state, error:",e)}},_=async t=>{var t=null==t?void 0:t.back;if(t){var{currentTab:n,pageUrl:a}=t;if(n){var t=null!=(t=t.count)?t:10,{origin:r,pathname:o}=window.location;let e=""+r+o;a?e=a:((e=(e=e.includes("index.html")?e.split("/index.html")[0]:e).includes("back.html")?e.split("/back.html")[0]:e).endsWith("/")&&(e=e.substring(0,e.length-1)),e+="/back.html");r=new URL(e),o=await y({zone:n.zoneId}),a=(n.url?o.set("url",n.url):n.domain&&n.zoneId&&(o.set("z",n.zoneId),o.set("domain",n.domain)),decodeURIComponent(r.toString()+"?"+o.toString()));P(a,t)}}},z=async(e,t,n)=>{t=t.includes("http")?t:"https://"+t,t=new URL(t+"/afu.php"),e=await y({zone:e.toString(),passParamToParams:n}),n=decodeURIComponent(t.toString()+"?"+e.toString());return console.log("URL generated:",n),n},I=({url:e})=>{window.location.replace(e)},T=(e,t)=>{console.error(`${t||"Some exit"} was supposed to work, but some data about this type of exit was missed`,e)},E=async(t,n,a=!0)=>{var r,o=t[n].currentTab;if(console.log(n+" worked",t),o){let e;if(o.zoneId&&o.domain)return null!=(r=window.syncMetric)&&r.call(window,{event:n,exitZoneId:o.zoneId}),e=await z(o.zoneId,o.domain),a&&await _(t),I({url:e});if(o.url)return null!=(r=window.syncMetric)&&r.call(window,{event:n,exitZoneId:o.url}),e=o.url,a&&await _(t),I({url:e})}T(o,n)},O=async(n,a)=>{var r,o,i=n[a];if(console.log(a+" worked",n),i){var{currentTab:l,newTab:s}=i;let e;l&&(l.zoneId&&l.domain?(e=await z(l.zoneId,l.domain),null!=(r=window.syncMetric)&&r.call(window,{event:a,exitZoneId:l.zoneId})):l.url?e=l.url:T(i,a));let t;s&&(s.zoneId&&s.domain?(t=await z(s.zoneId,s.domain),null!=(r=window.syncMetric)&&r.call(window,{event:a,exitZoneId:s.zoneId})):s.url?t=s.url:T(i,a)),await _(n),{currentTabUrl:o,newTabUrl:l}=[{currentTabUrl:e,newTabUrl:t}][0],void(l?(l=window.open(l,"_blank"))&&(l.opener=null,o)&&document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&I({url:o})}):o&&I({url:o}))}else T(i,a)},S=()=>"undefined"!=typeof APP_CONFIG||(document.body.innerHTML=`
            <p style="">LANDING CAN'T BE RENDERED. üîî PLEASE ADD CODE(you can find an object with options in your Propush account) FROM PROPUSH TO HEAD TAG.</p>
        `,!1),A=["currentTab","newTab"],N=["zoneId","url"],D=r=>{if(S()){let{domain:i,videoCount:e,prizeName:t,prizeImg:n,...a}=r;return{videoCount:e,prizeName:t,prizeImg:n,...Object.entries(a).reduce((e,[t,n])=>{var a,[t,r,o]=t.split("_");return t&&(A.includes(r)?(a=r,N.includes(o)&&(e[t]={...e[t],[a]:{domain:"zoneId"===o?i:void 0,[o]:n}})):N.includes(r)?(a=r,e[t]={...e[t],currentTab:{domain:"zoneId"===a?i:void 0,[a]:n}}):(o=r,e[t]={...e[t],[o]:n})),e},{})}}},j=((async()=>{let i,l=D(APP_CONFIG);if(l){var s=null==l?void 0:l.autoexit;if(null!=s&&s.currentTab){let e=null!=(i=s.timeToRedirect)?i:90,t="visible"===document.visibilityState,n=!1,a=function(){"visible"===document.visibilityState?(t=!0,n&&E(l,"autoexit")):t=!1},r=()=>(document.addEventListener("visibilitychange",a),setTimeout(()=>{n=!0,t&&E(l,"autoexit")},1e3*e)),o=r();s=()=>{clearTimeout(o),document.removeEventListener("visibilitychange",a)};document.addEventListener("mousemove",s),document.addEventListener("click",s),document.addEventListener("scroll",s)}}})(),5184e3),x=async e=>{var t=await y({zone:e.toString()}),n=g.abtest||APP_CONFIG.abtest;return g.ymid&&t.set("var_2",g.ymid),e&&t.set("z",e),g.wua&&t.set("wua",g.wua),n&&(t.set("ab2",String(n)),t.set("ab2_ttl",""+j)),t.set("sw","./sw.js"),t.set("d",location.host),t},b=async({outDomain:n,pushDomain:a,pushZone:r,allowedNew:o,allowedPop:i,subscribedNew:l,subscribedPop:s})=>{var e;(async e=>{var t=await x(r);e.src=`https://${a}/hid.js?`+t,e.onload=function(e){e.zoneId=r,e.events.onPermissionDefault=function(){},e.events.onPermissionAllowed=async function(){o&&window.open(await z(o,n),"_blank"),i&&(window.location.href=await z(i,n))},e.events.onPermissionDenied=function(){},e.events.onAlreadySubscribed=async function(){l&&window.open(await z(l,n),"_blank"),s&&(window.location.href=await z(s,n))},e.events.onNotificationUnsupported=function(){}}})(null==(e=[document.documentElement,document.body].filter(Boolean).pop())?void 0:e.appendChild(document.createElement("script")))},L=((a=D(APP_CONFIG))&&null!=(n=null==(a=a.push)?void 0:a.currentTab)&&n.domain&&null!=(n=null==a?void 0:a.currentTab)&&n.zoneId&&b({outDomain:a.currentTab.domain,pushDomain:"10zon.com",pushZone:a.currentTab.zoneId}),(async()=>{let a=D(APP_CONFIG);if(a){var e=null==a?void 0:a.reverse;let n=!1;null!=e&&e.currentTab&&(window.addEventListener("click",async()=>{try{var e,t;n||(e=window.location.pathname,t=""+e+window.location.search,await _(a),window.history.pushState(null,"",t),n=!0)}catch(e){console.error("Reverse pushStateToHistory error:",e)}},{capture:!0}),window.addEventListener("popstate",()=>{E(a,"reverse",!1)}))}})(),()=>{var e=window.location.search,e=new URLSearchParams(e).get("lang"),t=navigator.language.split("-")[0];return e||t||"en"}),k={},C=async e=>{let t=L();return k[t]||(k[t]=(async()=>{try{return await(await fetch(`./locales/${t}.json`)).json()}catch{return e()}})()),k[t]},R=async()=>Promise.resolve().then(()=>d(m(),1)).then(e=>e.default),U=((async()=>{(async(e,a)=>{var t=L(),t=(document.documentElement.setAttribute("lang",t),["ar","he","fa","ur","az","ku","ff","dv"].includes(t)&&document.documentElement.setAttribute("dir","rtl"),await C(e));let r=[];Object.entries(t).forEach(e=>{var t=e[0];let n=e[1];e=null==a?void 0:a[t],n=e?n.replaceAll(e.macros,e.macrosValue):n,e=document.querySelectorAll(`[data-translate="${t}"]`);null!=e&&e.length?e.forEach(e=>{e&&(e.hasAttribute("data-translate-html")?e.innerHTML=n:(e.childNodes.length||(e.textContent=n),e.childNodes.forEach(e=>{e.nodeType===Node.TEXT_NODE&&(e.nodeValue=n)})))}):r.push(t)}),r.length&&console.warn("Some keys from locales folder weren't used for translation when loading the landing page for the first time:",r.join(", "))})(R)})(),D(APP_CONFIG));U&&document.addEventListener("click",()=>{O(U,"mainExit")})})();
</script>

</body>
</html>
